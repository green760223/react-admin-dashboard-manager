import{r as m,al as G,ak as de}from"./index-45b240b9.js";var Oe=function(e){return function(r,n){var t=m.useRef(!1);e(function(){return function(){t.current=!1}},[]),e(function(){if(!t.current)t.current=!0;else return r()},n)}},b=function(){return b=Object.assign||function(r){for(var n,t=1,a=arguments.length;t<a;t++){n=arguments[t];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])}return r},b.apply(this,arguments)};function q(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(n[t[a]]=e[t[a]]);return n}function je(e,r,n,t){function a(u){return u instanceof n?u:new n(function(o){o(u)})}return new(n||(n=Promise))(function(u,o){function c(l){try{i(t.next(l))}catch(d){o(d)}}function s(l){try{i(t.throw(l))}catch(d){o(d)}}function i(l){l.done?u(l.value):a(l.value).then(c,s)}i((t=t.apply(e,r||[])).next())})}function _e(e,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,a,u,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(i){return function(l){return s([i,l])}}function s(i){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(n=0)),n;)try{if(t=1,a&&(u=i[0]&2?a.return:i[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,i[1])).done)return u;switch(a=0,u&&(i=[i[0]&2,u.value]),i[0]){case 0:case 1:u=i;break;case 4:return n.label++,{value:i[1],done:!1};case 5:n.label++,a=i[1],i=[0];continue;case 7:i=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(i[0]===6||i[0]===2)){n=0;continue}if(i[0]===3&&(!u||i[1]>u[0]&&i[1]<u[3])){n.label=i[1];break}if(i[0]===6&&n.label<u[1]){n.label=u[1],u=i;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(i);break}u[2]&&n.ops.pop(),n.trys.pop();continue}i=r.call(e,n)}catch(l){i=[6,l],a=0}finally{t=u=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function S(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var t=n.call(e),a,u=[],o;try{for(;(r===void 0||r-- >0)&&!(a=t.next()).done;)u.push(a.value)}catch(c){o={error:c}}finally{try{a&&!a.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return u}function T(e,r,n){if(n||arguments.length===2)for(var t=0,a=r.length,u;t<a;t++)(u||!(t in r))&&(u||(u=Array.prototype.slice.call(r,0,t)),u[t]=r[t]);return e.concat(u||Array.prototype.slice.call(r))}var J=function(e){return typeof e=="function"},$e=!1;const K=$e;function x(e){K&&(J(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var r=m.useRef(e);r.current=m.useMemo(function(){return e},[e]);var n=m.useRef();return n.current||(n.current=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.current.apply(this,t)}),n.current}const M=Oe(m.useEffect);var ve=function(e,r){var n=r.manual,t=r.ready,a=t===void 0?!0:t,u=r.defaultParams,o=u===void 0?[]:u,c=r.refreshDeps,s=c===void 0?[]:c,i=r.refreshDepsAction,l=m.useRef(!1);return l.current=!1,M(function(){!n&&a&&(l.current=!0,e.run.apply(e,T([],S(o),!1)))},[a]),M(function(){l.current||n||(l.current=!0,i?i():e.refresh())},T([],S(s),!1)),{onBefore:function(){if(!a)return{stopNow:!0}}}};ve.onInit=function(e){var r=e.ready,n=r===void 0?!0:r,t=e.manual;return{loading:!t&&n}};const Fe=ve;function Ee(e,r){if(e===r)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],r[n]))return!1;return!0}function ge(e,r){var n=m.useRef({deps:r,obj:void 0,initialized:!1}).current;return(n.initialized===!1||!Ee(n.deps,r))&&(n.deps=r,n.obj=e(),n.initialized=!0),n.obj}function me(e){var r=m.useRef(e);return r.current=e,r}var Ce=function(e){K&&(J(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var r=me(e);m.useEffect(function(){return function(){r.current()}},[])};const ne=Ce;var k=new Map,xe=function(e,r,n){var t=k.get(e);t!=null&&t.timer&&clearTimeout(t.timer);var a=void 0;r>-1&&(a=setTimeout(function(){k.delete(e)},r)),k.set(e,b(b({},n),{timer:a}))},Ae=function(e){return k.get(e)},X=new Map,ze=function(e){return X.get(e)},De=function(e,r){X.set(e,r),r.then(function(n){return X.delete(e),n}).catch(function(){X.delete(e)})},D={},Me=function(e,r){D[e]&&D[e].forEach(function(n){return n(r)})},ee=function(e,r){return D[e]||(D[e]=[]),D[e].push(r),function(){var t=D[e].indexOf(r);D[e].splice(t,1)}},We=function(e,r){var n=r.cacheKey,t=r.cacheTime,a=t===void 0?5*60*1e3:t,u=r.staleTime,o=u===void 0?0:u,c=r.setCache,s=r.getCache,i=m.useRef(),l=m.useRef(),d=function(v,f){c?c(f):xe(v,a,f),Me(v,f.data)},h=function(v,f){return f===void 0&&(f=[]),s?s(f):Ae(v)};return ge(function(){if(n){var v=h(n);v&&Object.hasOwnProperty.call(v,"data")&&(e.state.data=v.data,e.state.params=v.params,(o===-1||new Date().getTime()-v.time<=o)&&(e.state.loading=!1)),i.current=ee(n,function(f){e.setState({data:f})})}},[]),ne(function(){var v;(v=i.current)===null||v===void 0||v.call(i)}),n?{onBefore:function(v){var f=h(n,v);return!f||!Object.hasOwnProperty.call(f,"data")?{}:o===-1||new Date().getTime()-f.time<=o?{loading:!1,data:f==null?void 0:f.data,error:void 0,returnNow:!0}:{data:f==null?void 0:f.data,error:void 0}},onRequest:function(v,f){var P=ze(n);return P&&P!==l.current?{servicePromise:P}:(P=v.apply(void 0,T([],S(f),!1)),l.current=P,De(n,P),{servicePromise:P})},onSuccess:function(v,f){var P;n&&((P=i.current)===null||P===void 0||P.call(i),d(n,{data:v,params:f,time:new Date().getTime()}),i.current=ee(n,function(w){e.setState({data:w})}))},onMutate:function(v){var f;n&&((f=i.current)===null||f===void 0||f.call(i),d(n,{data:v,params:e.state.params,time:new Date().getTime()}),i.current=ee(n,function(P){e.setState({data:P})}))}}:{}};const Le=We;function Ne(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var te=Ne,Be=typeof G=="object"&&G&&G.Object===Object&&G,Ie=Be,He=Ie,Ve=typeof self=="object"&&self&&self.Object===Object&&self,Ue=He||Ve||Function("return this")(),he=Ue,Ge=he,ke=function(){return Ge.Date.now()},Xe=ke,qe=/\s/;function Je(e){for(var r=e.length;r--&&qe.test(e.charAt(r)););return r}var Ke=Je,Qe=Ke,Ye=/^\s+/;function Ze(e){return e&&e.slice(0,Qe(e)+1).replace(Ye,"")}var er=Ze,rr=he,nr=rr.Symbol,pe=nr,ie=pe,be=Object.prototype,tr=be.hasOwnProperty,ar=be.toString,L=ie?ie.toStringTag:void 0;function ir(e){var r=tr.call(e,L),n=e[L];try{e[L]=void 0;var t=!0}catch{}var a=ar.call(e);return t&&(r?e[L]=n:delete e[L]),a}var ur=ir,or=Object.prototype,cr=or.toString;function sr(e){return cr.call(e)}var fr=sr,ue=pe,lr=ur,dr=fr,vr="[object Null]",gr="[object Undefined]",oe=ue?ue.toStringTag:void 0;function mr(e){return e==null?e===void 0?gr:vr:oe&&oe in Object(e)?lr(e):dr(e)}var hr=mr;function pr(e){return e!=null&&typeof e=="object"}var br=pr,yr=hr,Pr=br,Sr="[object Symbol]";function Tr(e){return typeof e=="symbol"||Pr(e)&&yr(e)==Sr}var wr=Tr,Rr=er,ce=te,Or=wr,se=0/0,jr=/^[-+]0x[0-9a-f]+$/i,_r=/^0b[01]+$/i,$r=/^0o[0-7]+$/i,Fr=parseInt;function Er(e){if(typeof e=="number")return e;if(Or(e))return se;if(ce(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=ce(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Rr(e);var n=_r.test(e);return n||$r.test(e)?Fr(e.slice(2),n?2:8):jr.test(e)?se:+e}var Cr=Er,xr=te,re=Xe,fe=Cr,Ar="Expected a function",zr=Math.max,Dr=Math.min;function Mr(e,r,n){var t,a,u,o,c,s,i=0,l=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(Ar);r=fe(r)||0,xr(n)&&(l=!!n.leading,d="maxWait"in n,u=d?zr(fe(n.maxWait)||0,r):u,h="trailing"in n?!!n.trailing:h);function v(g){var $=t,j=a;return t=a=void 0,i=g,o=e.apply(j,$),o}function f(g){return i=g,c=setTimeout(_,r),l?v(g):o}function P(g){var $=g-s,j=g-i,A=r-$;return d?Dr(A,u-j):A}function w(g){var $=g-s,j=g-i;return s===void 0||$>=r||$<0||d&&j>=u}function _(){var g=re();if(w(g))return E(g);c=setTimeout(_,P(g))}function E(g){return c=void 0,h&&t?v(g):(t=a=void 0,o)}function F(){c!==void 0&&clearTimeout(c),i=0,t=s=a=c=void 0}function C(){return c===void 0?o:E(re())}function O(){var g=re(),$=w(g);if(t=arguments,a=this,s=g,$){if(c===void 0)return f(s);if(d)return clearTimeout(c),c=setTimeout(_,r),v(s)}return c===void 0&&(c=setTimeout(_,r)),o}return O.cancel=F,O.flush=C,O}var ye=Mr;const Wr=de(ye);var Lr=function(e,r){var n=r.debounceWait,t=r.debounceLeading,a=r.debounceTrailing,u=r.debounceMaxWait,o=m.useRef(),c=m.useMemo(function(){var s={};return t!==void 0&&(s.leading=t),a!==void 0&&(s.trailing=a),u!==void 0&&(s.maxWait=u),s},[t,a,u]);return m.useEffect(function(){if(n){var s=e.runAsync.bind(e);return o.current=Wr(function(i){i()},n,c),e.runAsync=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return new Promise(function(d,h){var v;(v=o.current)===null||v===void 0||v.call(o,function(){s.apply(void 0,T([],S(i),!1)).then(d).catch(h)})})},function(){var i;(i=o.current)===null||i===void 0||i.cancel(),e.runAsync=s}}},[n,c]),n?{onCancel:function(){var s;(s=o.current)===null||s===void 0||s.cancel()}}:{}};const Nr=Lr;var Br=function(e,r){var n=r.loadingDelay,t=r.ready,a=m.useRef();if(!n)return{};var u=function(){a.current&&clearTimeout(a.current)};return{onBefore:function(){return u(),t!==!1&&(a.current=setTimeout(function(){e.setState({loading:!0})},n)),{loading:!1}},onFinally:function(){u()},onCancel:function(){u()}}};const Ir=Br;var Hr=!!(typeof window<"u"&&window.document&&window.document.createElement);const Q=Hr;function ae(){return Q?document.visibilityState!=="hidden":!0}var N=[];function Vr(e){return N.push(e),function(){var n=N.indexOf(e);N.splice(n,1)}}if(Q){var Ur=function(){if(ae())for(var e=0;e<N.length;e++){var r=N[e];r()}};window.addEventListener("visibilitychange",Ur,!1)}var Gr=function(e,r){var n=r.pollingInterval,t=r.pollingWhenHidden,a=t===void 0?!0:t,u=r.pollingErrorRetryCount,o=u===void 0?-1:u,c=m.useRef(),s=m.useRef(),i=m.useRef(0),l=function(){var d;c.current&&clearTimeout(c.current),(d=s.current)===null||d===void 0||d.call(s)};return M(function(){n||l()},[n]),n?{onBefore:function(){l()},onError:function(){i.current+=1},onSuccess:function(){i.current=0},onFinally:function(){o===-1||o!==-1&&i.current<=o?c.current=setTimeout(function(){!a&&!ae()?s.current=Vr(function(){e.refresh()}):e.refresh()},n):i.current=0},onCancel:function(){l()}}:{}};const kr=Gr;function Xr(e,r){var n=!1;return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];n||(n=!0,e.apply(void 0,T([],S(t),!1)),setTimeout(function(){n=!1},r))}}function qr(){return Q&&typeof navigator.onLine<"u"?navigator.onLine:!0}var B=[];function Jr(e){return B.push(e),function(){var n=B.indexOf(e);n>-1&&B.splice(n,1)}}if(Q){var le=function(){if(!(!ae()||!qr()))for(var e=0;e<B.length;e++){var r=B[e];r()}};window.addEventListener("visibilitychange",le,!1),window.addEventListener("focus",le,!1)}var Kr=function(e,r){var n=r.refreshOnWindowFocus,t=r.focusTimespan,a=t===void 0?5e3:t,u=m.useRef(),o=function(){var c;(c=u.current)===null||c===void 0||c.call(u)};return m.useEffect(function(){if(n){var c=Xr(e.refresh.bind(e),a);u.current=Jr(function(){c()})}return function(){o()}},[n,a]),ne(function(){o()}),{}};const Qr=Kr;var Yr=function(e,r){var n=r.retryInterval,t=r.retryCount,a=m.useRef(),u=m.useRef(0),o=m.useRef(!1);return t?{onBefore:function(){o.current||(u.current=0),o.current=!1,a.current&&clearTimeout(a.current)},onSuccess:function(){u.current=0},onError:function(){if(u.current+=1,t===-1||u.current<=t){var c=n??Math.min(1e3*Math.pow(2,u.current),3e4);a.current=setTimeout(function(){o.current=!0,e.refresh()},c)}else u.current=0},onCancel:function(){u.current=0,a.current&&clearTimeout(a.current)}}:{}};const Zr=Yr;var en=ye,rn=te,nn="Expected a function";function tn(e,r,n){var t=!0,a=!0;if(typeof e!="function")throw new TypeError(nn);return rn(n)&&(t="leading"in n?!!n.leading:t,a="trailing"in n?!!n.trailing:a),en(e,r,{leading:t,maxWait:r,trailing:a})}var an=tn;const un=de(an);var on=function(e,r){var n=r.throttleWait,t=r.throttleLeading,a=r.throttleTrailing,u=m.useRef(),o={};return t!==void 0&&(o.leading=t),a!==void 0&&(o.trailing=a),m.useEffect(function(){if(n){var c=e.runAsync.bind(e);return u.current=un(function(s){s()},n,o),e.runAsync=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return new Promise(function(l,d){var h;(h=u.current)===null||h===void 0||h.call(u,function(){c.apply(void 0,T([],S(s),!1)).then(l).catch(d)})})},function(){var s;e.runAsync=c,(s=u.current)===null||s===void 0||s.cancel()}}},[n,t,a]),n?{onCancel:function(){var c;(c=u.current)===null||c===void 0||c.cancel()}}:{}};const cn=on;var sn=function(e){K&&(J(e)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof e,'".'))),m.useEffect(function(){e==null||e()},[])};const fn=sn;var ln=function(){var e=S(m.useState({}),2),r=e[1];return m.useCallback(function(){return r({})},[])};const dn=ln;var vn=function(){function e(r,n,t,a){a===void 0&&(a={}),this.serviceRef=r,this.options=n,this.subscribe=t,this.initState=a,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=b(b(b({},this.state),{loading:!n.manual}),a)}return e.prototype.setState=function(r){r===void 0&&(r={}),this.state=b(b({},this.state),r),this.subscribe()},e.prototype.runPluginHandler=function(r){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var a=this.pluginImpls.map(function(u){var o;return(o=u[r])===null||o===void 0?void 0:o.call.apply(o,T([u],S(n),!1))}).filter(Boolean);return Object.assign.apply(Object,T([{}],S(a),!1))},e.prototype.runAsync=function(){for(var r,n,t,a,u,o,c,s,i,l,d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return je(this,void 0,void 0,function(){var v,f,P,w,_,E,F,C,O,g,$;return _e(this,function(j){switch(j.label){case 0:if(this.count+=1,v=this.count,f=this.runPluginHandler("onBefore",d),P=f.stopNow,w=P===void 0?!1:P,_=f.returnNow,E=_===void 0?!1:_,F=q(f,["stopNow","returnNow"]),w)return[2,new Promise(function(){})];if(this.setState(b({loading:!0,params:d},F)),E)return[2,Promise.resolve(F.data)];(n=(r=this.options).onBefore)===null||n===void 0||n.call(r,d),j.label=1;case 1:return j.trys.push([1,3,,4]),C=this.runPluginHandler("onRequest",this.serviceRef.current,d).servicePromise,C||(C=($=this.serviceRef).current.apply($,T([],S(d),!1))),[4,C];case 2:return O=j.sent(),v!==this.count?[2,new Promise(function(){})]:(this.setState({data:O,error:void 0,loading:!1}),(a=(t=this.options).onSuccess)===null||a===void 0||a.call(t,O,d),this.runPluginHandler("onSuccess",O,d),(o=(u=this.options).onFinally)===null||o===void 0||o.call(u,d,O,void 0),v===this.count&&this.runPluginHandler("onFinally",d,O,void 0),[2,O]);case 3:if(g=j.sent(),v!==this.count)return[2,new Promise(function(){})];throw this.setState({error:g,loading:!1}),(s=(c=this.options).onError)===null||s===void 0||s.call(c,g,d),this.runPluginHandler("onError",g,d),(l=(i=this.options).onFinally)===null||l===void 0||l.call(i,d,void 0,g),v===this.count&&this.runPluginHandler("onFinally",d,void 0,g),g;case 4:return[2]}})})},e.prototype.run=function(){for(var r=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.runAsync.apply(this,T([],S(n),!1)).catch(function(a){r.options.onError||console.error(a)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,T([],S(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,T([],S(this.state.params||[]),!1))},e.prototype.mutate=function(r){var n=J(r)?r(this.state.data):r;this.runPluginHandler("onMutate",n),this.setState({data:n})},e}();const gn=vn;function mn(e,r,n){r===void 0&&(r={}),n===void 0&&(n=[]);var t=r.manual,a=t===void 0?!1:t,u=q(r,["manual"]);K&&r.defaultParams&&!Array.isArray(r.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof r.defaultParams));var o=b({manual:a},u),c=me(e),s=dn(),i=ge(function(){var l=n.map(function(d){var h;return(h=d==null?void 0:d.onInit)===null||h===void 0?void 0:h.call(d,o)}).filter(Boolean);return new gn(c,o,s,Object.assign.apply(Object,T([{}],S(l),!1)))},[]);return i.options=o,i.pluginImpls=n.map(function(l){return l(i,o)}),fn(function(){if(!a){var l=i.state.params||r.defaultParams||[];i.run.apply(i,T([],S(l),!1))}}),ne(function(){i.cancel()}),{loading:i.state.loading,data:i.state.data,error:i.state.error,params:i.state.params||[],cancel:x(i.cancel.bind(i)),refresh:x(i.refresh.bind(i)),refreshAsync:x(i.refreshAsync.bind(i)),run:x(i.run.bind(i)),runAsync:x(i.runAsync.bind(i)),mutate:x(i.mutate.bind(i))}}function hn(e,r,n){return mn(e,r,T(T([],S(n||[]),!1),[Nr,Ir,kr,Qr,cn,Fe,Le,Zr],!1))}var pn=function(e,r){var n;r===void 0&&(r={});var t=r.defaultPageSize,a=t===void 0?10:t,u=r.defaultCurrent,o=u===void 0?1:u,c=q(r,["defaultPageSize","defaultCurrent"]),s=hn(e,b({defaultParams:[{current:o,pageSize:a}],refreshDepsAction:function(){_(1)}},c)),i=s.params[0]||{},l=i.current,d=l===void 0?1:l,h=i.pageSize,v=h===void 0?a:h,f=((n=s.data)===null||n===void 0?void 0:n.total)||0,P=m.useMemo(function(){return Math.ceil(f/v)},[v,f]),w=function(F,C){var O=F<=0?1:F,g=C<=0?1:C,$=Math.ceil(f/g);O>$&&(O=Math.max(1,$));var j=S(s.params||[]),A=j[0],I=A===void 0?{}:A,Y=j.slice(1);s.run.apply(s,T([b(b({},I),{current:O,pageSize:g})],S(Y),!1))},_=function(F){w(F,v)},E=function(F){w(d,F)};return b(b({},s),{pagination:{current:d,pageSize:v,total:f,totalPage:P,onChange:x(w),changeCurrent:x(_),changePageSize:x(E)}})};const bn=pn;var yn=function(e,r){var n;r===void 0&&(r={});var t=r.form,a=r.defaultType,u=a===void 0?"simple":a,o=r.defaultParams,c=r.manual,s=c===void 0?!1:c,i=r.refreshDeps,l=i===void 0?[]:i,d=r.ready,h=d===void 0?!0:d,v=q(r,["form","defaultType","defaultParams","manual","refreshDeps","ready"]),f=bn(e,b(b({manual:!0},v),{onSuccess:function(){for(var y,p=[],R=0;R<arguments.length;R++)p[R]=arguments[R];j.current=!0,(y=v.onSuccess)===null||y===void 0||y.call.apply(y,T([v],S(p),!1))}})),P=f.params,w=P===void 0?[]:P,_=f.run,E=w[2]||{},F=S(m.useState((E==null?void 0:E.type)||u),2),C=F[0],O=F[1],g=m.useRef({}),$=m.useRef([]),j=m.useRef(!1),A=!!(t!=null&&t.getInternalHooks),I=function(){if(!t)return{};if(A)return t.getFieldsValue(null,function(){return!0});var y=t.getFieldsValue(),p={};return Object.keys(y).forEach(function(R){(!t.getFieldInstance||t.getFieldInstance(R))&&(p[R]=y[R])}),p},Y=function(){if(!t)return Promise.resolve({});var y=I(),p=Object.keys(y);return A?t.validateFields(p):new Promise(function(R,z){t.validateFields(p,function(W,Z){W?z(W):R(Z)})})},H=function(){if(t){if(A)return t.setFieldsValue(g.current);var y={};Object.keys(g.current).forEach(function(p){(!t.getFieldInstance||t.getFieldInstance(p))&&(y[p]=g.current[p])}),t.setFieldsValue(y)}},Pe=function(){var y=I();g.current=b(b({},g.current),y),O(function(p){return p==="simple"?"advance":"simple"})},V=function(y){h&&setTimeout(function(){Y().then(function(p){p===void 0&&(p={});var R=y||b(b({pageSize:r.defaultPageSize||10},(w==null?void 0:w[0])||{}),{current:1});if(!t){_(R);return}g.current=b(b({},g.current),p),_(R,p,{allFormData:g.current,type:C})}).catch(function(p){return p})})},Se=function(){var y,p;t&&t.resetFields(),V(b(b({},(o==null?void 0:o[0])||{}),{pageSize:r.defaultPageSize||((p=(y=r.defaultParams)===null||y===void 0?void 0:y[0])===null||p===void 0?void 0:p.pageSize)||10,current:1}))},Te=function(y){var p,R,z;(p=y==null?void 0:y.preventDefault)===null||p===void 0||p.call(y),V(j.current?void 0:b({pageSize:r.defaultPageSize||((z=(R=r.defaultParams)===null||R===void 0?void 0:R[0])===null||z===void 0?void 0:z.pageSize)||10,current:1},(o==null?void 0:o[0])||{}))},we=function(y,p,R,z){var W=S(w||[]),Z=W[0],Re=W.slice(1);_.apply(void 0,T([b(b({},Z),{current:y.current,pageSize:y.pageSize,filters:p,sorter:R,extra:z})],S(Re),!1))};m.useEffect(function(){if(w.length>0){g.current=(E==null?void 0:E.allFormData)||{},H(),_.apply(void 0,T([],S(w),!1));return}!s&&h&&(g.current=(o==null?void 0:o[1])||{},H(),V(o==null?void 0:o[0]))},[]),M(function(){h&&H()},[C]);var U=m.useRef(!1);return U.current=!1,M(function(){!s&&h&&(U.current=!0,t&&t.resetFields(),g.current=(o==null?void 0:o[1])||{},H(),V(o==null?void 0:o[0]))},[h]),M(function(){U.current||h&&(s||(U.current=!0,f.pagination.changeCurrent(1)))},T([],S(l),!1)),b(b({},f),{tableProps:{dataSource:((n=f.data)===null||n===void 0?void 0:n.list)||$.current,loading:f.loading,onChange:x(we),pagination:{current:f.pagination.current,pageSize:f.pagination.pageSize,total:f.pagination.total}},search:{submit:x(Te),type:C,changeType:x(Pe),reset:x(Se)}})};const Sn=yn;export{q as _,je as a,M as b,ne as c,pe as d,wr as i,Sn as u};
